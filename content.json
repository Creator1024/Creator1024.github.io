{"meta":{"title":"oneWay","subtitle":null,"description":null,"author":"oneWay","url":"http://534160110.gitee.io/blog"},"pages":[{"title":"About","date":"2018-05-21T04:42:07.586Z","updated":"2018-05-21T04:42:07.586Z","comments":true,"path":"about/index.html","permalink":"http://534160110.gitee.io/blog/about/index.html","excerpt":"","text":""},{"title":"Categories","date":"2018-05-21T04:42:07.588Z","updated":"2018-05-21T04:42:07.588Z","comments":true,"path":"categories/index.html","permalink":"http://534160110.gitee.io/blog/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2018-05-21T04:42:07.591Z","updated":"2018-05-21T04:42:07.591Z","comments":true,"path":"tags/index.html","permalink":"http://534160110.gitee.io/blog/tags/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-05-19T15:52:42.000Z","updated":"2018-05-19T16:02:19.383Z","comments":true,"path":"category/index.html","permalink":"http://534160110.gitee.io/blog/category/index.html","excerpt":"","text":""}],"posts":[{"title":"Ipsec","slug":"Ipsec","date":"2018-05-25T14:25:18.000Z","updated":"2018-05-25T14:26:58.569Z","comments":true,"path":"2018/05/25/Ipsec/","link":"","permalink":"http://534160110.gitee.io/blog/2018/05/25/Ipsec/","excerpt":"","text":"1.配置基本信息123AR1和AR3都写入一条默认路由模拟到达外网[AR1]ip route-static 0.0.0.0 0.0.0.0 12.1.1.2[AR3]ip route-static 0.0.0.0 0.0.0.0 23.1.1.2 2.配置IPSec12345678910111213141516171819202122232425262728总部路由器（AR1）配置1.抓取内网流量[AR1]acl 3000[AR1-acl-adv-3000]rule 5 permit ip source 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.2552.配置ike[AR1]ike proposal 1[AR1-ike-proposal-1]encryption-algorithm 3des-cbc[AR1-ike-proposal-1]authentication-algorithm md5[AR1-ike-proposal-1]quit[AR1]ike peer AR3 v1[AR1-ike-peer-AR3]pre-shared-key simple oneWay //设置协商密钥，隧道两端要一致[AR1-ike-peer-AR3]ike-proposal 1 //调用刚刚创建的ike[AR1-ike-peer-AR3]remote-address 23.1.1.3 3.配置IPSec[AR1]ipsec proposal 1[AR1-ipsec-proposal-1]transform ah[AR1]ipsec policy Test 10 isakmp[AR1-ipsec-policy-isakmp-Test-10]security acl 3000 //isakmp使用ike建立ipsec SA[AR1-ipsec-policy-isakmp-Test-10]ike-peer AR3[AR1-ipsec-policy-isakmp-Test-10]proposal 14.接口下调用ipsec policy[AR1-GigabitEthernet0/0/1]ipsec policy Test 123456789101112131415161718192021222324分部路由器（AR3）配置[AR3]acl 3000[AR3-acl-adv-3000]rule 5 permit ip source 192.168.2.0 0.0.0.255 destination 192.168.1.0 0.0.0.255[AR3]ike proposal 1[AR3-ike-proposal-1]encryption-algorithm 3des-cbc [AR3-ike-proposal-1]authentication-algorithm md5[AR3]ike peer AR1 v1[AR3-ike-peer-AR1]pre-shared-key simple oneWay[AR3-ike-peer-AR1]ike-proposal 1[AR3-ike-peer-AR1]remote-address 12.1.1.1[AR3]ipsec proposal 1[AR3-ipsec-proposal-1]transform ah[AR3]ipsec policy Test 10 isakmp [AR3-ipsec-policy-isakmp-Test-10]security acl 3000[AR3-ipsec-policy-isakmp-Test-10]ike-peer AR1[AR3-ipsec-policy-isakmp-Test-10]proposal 1[AR3-ipsec-policy-isakmp-Test-10]quit[AR3-GigabitEthernet0/0/0]ipsec policy Test 3.验证结果若配置错误，display不会出现以下信息： PC1成功ping通PC3： 参考资料","categories":[{"name":"数据通信","slug":"数据通信","permalink":"http://534160110.gitee.io/blog/categories/数据通信/"},{"name":"R&S配置","slug":"数据通信/R-S配置","permalink":"http://534160110.gitee.io/blog/categories/数据通信/R-S配置/"},{"name":"华为","slug":"数据通信/R-S配置/华为","permalink":"http://534160110.gitee.io/blog/categories/数据通信/R-S配置/华为/"}],"tags":[{"name":"huawei","slug":"huawei","permalink":"http://534160110.gitee.io/blog/tags/huawei/"},{"name":"IPSec","slug":"IPSec","permalink":"http://534160110.gitee.io/blog/tags/IPSec/"},{"name":"ospf","slug":"ospf","permalink":"http://534160110.gitee.io/blog/tags/ospf/"}]},{"title":"dhcp+ospf","slug":"dhcp+ospf","date":"2018-05-24T13:31:59.000Z","updated":"2018-05-25T14:27:03.889Z","comments":true,"path":"2018/05/24/dhcp+ospf/","link":"","permalink":"http://534160110.gitee.io/blog/2018/05/24/dhcp+ospf/","excerpt":"","text":"HUAWEI DHCP+OSPF TestR1: dhcp enable //全局下先开启DHCP功能 ip pool network1 gateway-list 192.168.1.1 network 192.168.1.0 mask 255.255.255.0 excluded-ip-address 192.168.1.2 //排除地址 dns-list 192.168.1.1 interface Ethernet0/0/0 ip address 192.168.1.1 255.255.255.0 dhcp select global//该接口收到DHCP报文后直接去DHCP服务器在全局配置的IP地址池中寻找一个可用的地址 interface Ethernet0/0/1 ip address 12.1.1.1 255.255.255.0 R2: dhcp enable dhcp server ping packet 10 timeout 100 //配置dhcp服务器分配某个ip之前先探测该ip是否已被网络中pc使用的功能，dhcp服务器会向该ip地址发10个包且每次100ms，无应答才会分配该ip地址给客户端 dhcp check dhcp-rate enable //开启dhcp的速率检测功能开关 dhcp check dhcp-rate 90 //检测收到dhcp请求包的速率最大为90个/s，默认100个/s，防止dhcp泛红攻击 ip pool network2 gateway-list 192.168.2.1 network 192.168.2.0 mask 255.255.255.0 dns-list 192.168.2.1 static-bind ip-address 192.168.2.10 mac-address 0001-1111-2222 //为固定mac分配固定ip interface Ethernet0/0/0 ip address 12.1.1.2 255.255.255.0 interface Ethernet0/0/1 ip address 23.1.1.2 255.255.255.0 dhcp select global R3： ehcp enable interface Ethernet0/0/0 ip address 23.1.1.3 255.255.255.0 interface Ethernet0/0/1 ip address 192.168.2.1 255.255.255.0 dhcp select relay //dhcp中继 dhcp relay server-ip 23.1.1.2 此时PC1可以动态获取到ip地址，而PC2不可以。因为R2没有到达192.168.2.1的路由，无法回应Offer报文配置OPSF： [R1] ospf 1 area 0.0.0.0 network 192.168.1.1 0.0.0.0 network 12.1.1.1 0.0.0.0 [R2] ospf 1 area 0.0.0.0 network 12.1.1.2 0.0.0.0 network 23.1.1.2 0.0.0.0 [R3] ospf 1 area 0.0.0.0 network 192.168.2.1 0.0.0.0 network 23.1.1.3 0.0.0.0","categories":[{"name":"数据通信","slug":"数据通信","permalink":"http://534160110.gitee.io/blog/categories/数据通信/"},{"name":"R&S配置","slug":"数据通信/R-S配置","permalink":"http://534160110.gitee.io/blog/categories/数据通信/R-S配置/"},{"name":"华为","slug":"数据通信/R-S配置/华为","permalink":"http://534160110.gitee.io/blog/categories/数据通信/R-S配置/华为/"}],"tags":[{"name":"huawei","slug":"huawei","permalink":"http://534160110.gitee.io/blog/tags/huawei/"},{"name":"ospf","slug":"ospf","permalink":"http://534160110.gitee.io/blog/tags/ospf/"},{"name":"dhcp","slug":"dhcp","permalink":"http://534160110.gitee.io/blog/tags/dhcp/"}]},{"title":"Hello World","slug":"hello-world","date":"2018-05-15T03:29:09.533Z","updated":"2018-05-15T03:29:09.533Z","comments":true,"path":"2018/05/15/hello-world/","link":"","permalink":"http://534160110.gitee.io/blog/2018/05/15/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}